<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough" xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/WEB-INF/templates/admin/basicTemplate.xhtml">
	
	<ui:define name="content">
	
		<h:form id="form">
	
		<h:panelGroup id="mainContainer" layout="block" styleClass="container">
				
			<h:panelGroup layout="block" styleClass="row">					    						    						
				<h:panelGrid layout="block" width="100%" columns="1" columnClasses="pageTitle">		
					<h:outputText value="#{msg['page.title.createarticle']}"/>						
				</h:panelGrid>
			</h:panelGroup>
			
			<h:panelGrid width="100%" style="height:40px;"/>				
					
			<h:panelGroup layout="block" styleClass="row">					    						    						
			
				<h:panelGroup layout="block" styleClass="col-md-3">		
				
					<h:panelGrid layout="block" columnClasses="sectionTableHeader" width="100%" columns="1">				
				    	<h:outputText styleClass="sectionTableHeaderText" value="#{msg['page.label.menu']}"/>
				    </h:panelGrid>
					    			
					<h:panelGrid layout="block" width="100%" columns="1" columnClasses="menuTableColumn">				    
						<h:link value="#{msg['page.label.cancel']}" outcome="/pages/admin/index.xhtml" />					
					</h:panelGrid>
						
				</h:panelGroup>
												
				<h:panelGroup layout="block" styleClass="col-md-9">
						
					<h:panelGroup id="featureDetails" layout="block" styleClass="col-md-11">					    						    		
										
														
						<h:panelGrid layout="block" columnClasses="sectionTableHeader" width="100%" columns="1">				
					    	<h:outputText styleClass="sectionTableHeaderText" value="#{msg['page.label.articledetails']}"/>
					    </h:panelGrid>
									
						<h:panelGrid layout="block" width="100%" columns="3" columnClasses="featureTableLabelColumn,featureTableLabelValueColumn,featureTableLabelErrorColumn">
						
					    	<h:outputText for="subjectInput" value="#{msg['page.label.subject']}"/>
					    	<h:inputText id="subjectInput" label="Subject" styleClass="textInputMaxWidth" required="true"
					    		validatorMessage="#{msg['page.title.createarticle']}" value="#{editArticleBean.selectedArticle.subject}">
					    		<f:validateLength minimum="5" maximum="255" />
					    	</h:inputText>					    	
					    	<h:message for="subjectInput" style="color:red" />
					    	
					    	<h:outputText value="#{msg['page.label.shortdescription']}"/>
					    	<h:inputTextarea id="shortDescriptionInput" label="Short desctiption" required="true" style="width:100%" 
					    		cols="10" rows="2" value="#{editArticleBean.selectedArticle.shortDescription}">
					    		<f:validateLength minimum="5" maximum="512" />
					    	</h:inputTextarea>
					    	<h:message for="shortDescriptionInput" style="color:red" />
					    	
					    	<h:outputText for="contentInput" value="#{msg['page.label.content']}"/>
					    	<h:inputTextarea id="contentInput" label="Content" required="true" style="width:100%" 
					    		cols="10" rows="10" value="#{editArticleBean.selectedArticle.content}">
					    		<f:validateLength minimum="100" maximum="8192" />
					    	</h:inputTextarea>
					    	<h:message for="contentInput" style="color:red" />
					    	
					    	<h:outputText for="categoryInput" value="#{msg['page.label.category']}"/>
					    	<h:selectOneMenu id="categoryInput" label="Category" required="true" converter="categoryConverter" value="#{editArticleBean.selectedArticle.category}">
					    	    <f:selectItem itemLabel="Select" noSelectionOption="true" />
					    		<f:selectItems value="#{editArticleBean.availableCategories}" var="cat" label="#{cat.name}"/>
					    	</h:selectOneMenu>
					    	<h:message for="categoryInput" style="color:red" />
					    	
					   </h:panelGrid>
					    	
					   <h:panelGrid id="imageInputContainer" layout="block" width="100%" columns="3" columnClasses="featureTableLabelColumn,featureTableLabelValueColumn,featureTableLabelErrorColumn">				    	
						  	<h:outputText for="imagesInput" value="#{msg['page.label.images']}"/>
						  	<h:dataTable id="imagesInput" width="100%" rendered="#{editArticleBean.selectedArticle.imageUrls.size()>0}" value="#{editArticleBean.selectedArticle.imageUrls}" var="imageUrl"
						             border="0" columnClasses="mediaResourceTableColumn">						             
							    <h:column>
							        <h:inputText styleClass="textInputMaxWidth" value="#{imageUrl}" />
							    </h:column>
						        <f:facet name="footer">
							       	<h:panelGrid columns="1" columnClasses="alignRight" width="100%">
							        	<h:commandButton value="#{msg['page.label.add']}">
										    <f:ajax listener="#{editArticleBean.addImage}" process="imagesInput" render="imagesInput" />
										</h:commandButton> 						        	
							        </h:panelGrid>
						        </f:facet>						             
							</h:dataTable>
							<h:commandButton rendered="#{editArticleBean.selectedArticle.imageUrls.size()==0}" value="#{msg['page.label.add']}">
							    <f:ajax listener="#{editArticleBean.addImage}" render="imageInputContainer" />
							</h:commandButton>    			
						  	<h:message for="imagesInput" style="color:red" />				    	
						</h:panelGrid>
					    					    	
						<h:panelGrid id="videoInputContainer" layout="block" width="100%" columns="3" columnClasses="featureTableLabelColumn,featureTableLabelValueColumn,featureTableLabelErrorColumn">				    	
						  	<h:outputText for="videoInput" value="#{msg['page.label.video']}"/>
						  	<h:dataTable id="videoInput" width="100%" rendered="#{editArticleBean.selectedArticle.videoUrls.size()>0}" value="#{editArticleBean.selectedArticle.videoUrls}" var="videoUrl"
						             border="0" columnClasses="mediaResourceTableColumn">						             
							    <h:column>
							        <h:inputText styleClass="textInputMaxWidth" value="#{videoUrl}" />
							    </h:column>
						        <f:facet name="footer">
							       	<h:panelGrid columns="1" columnClasses="alignRight" width="100%">
							        	<h:commandButton value="#{msg['page.label.add']}">
										    <f:ajax listener="#{editArticleBean.addVideo}" process="videoInput" render="videoInput" />
										</h:commandButton> 						        	
							        </h:panelGrid>
						        </f:facet>						             
							</h:dataTable>
							<h:commandButton rendered="#{editArticleBean.selectedArticle.videoUrls.size()==0}" value="#{msg['page.label.add']}">
							    <f:ajax listener="#{editArticleBean.addVideo}" render="videoInputContainer" />
							</h:commandButton>    			
						  	<h:message for="videoInput" style="color:red" />				    	
						 </h:panelGrid>
					    					    	
					    <h:panelGrid id="audioInputContainer" layout="block" width="100%" columns="3" columnClasses="featureTableLabelColumn,featureTableLabelValueColumn,featureTableLabelErrorColumn">				    	
					    	<h:outputText for="audioInput" value="#{msg['page.label.audio']}"/>
					    	<h:dataTable id="audioInput" width="100%" rendered="#{editArticleBean.selectedArticle.audioUrls.size()>0}" value="#{editArticleBean.selectedArticle.audioUrls}" var="audioUrl"
							             border="0" columnClasses="mediaResourceTableColumn">						             
							    <h:column>
							        <h:inputText styleClass="textInputMaxWidth" value="#{audioUrl}" />
							    </h:column>
						        <f:facet name="footer">
						        	<h:panelGrid columns="1" columnClasses="alignRight" width="100%">
							        	<h:commandButton value="#{msg['page.label.add']}">
										    <f:ajax listener="#{editArticleBean.addAudio}" process="audioInput" render="audioInput" />
										</h:commandButton> 						        	
							        </h:panelGrid>
						        </f:facet>						             
							</h:dataTable>
							<h:commandButton rendered="#{editArticleBean.selectedArticle.audioUrls.size()==0}" value="#{msg['page.label.add']}">
							    <f:ajax listener="#{editArticleBean.addAudio}" render="audioInputContainer" />
							</h:commandButton>    			
					    	<h:message for="audioInput" style="color:red" />				    	
						</h:panelGrid>	
						
						<h:panelGrid id="formErrors" width="100%" columns="1" columnClasses="alignRight">
							<h:messages for="form" style="color:red" />				    							
						</h:panelGrid>	
						
						<h:panelGrid width="100%" columns="2" columnClasses="featureTableActionColumn, featureTableActionColumn">
							<h:commandLink value="#{msg['page.label.publish']}" action="#{editArticleBean.saveArticle}"/>						 									    												    																    												    																			
							<h:commandLink value="#{msg['page.label.reset']}">
								<f:ajax listener="#{editArticleBean.reloadArticle}" process="@this" render="featureDetails" />
							</h:commandLink>
						</h:panelGrid>						
																		
						<h:panelGrid width="100%" style="height:50px;"/>
		
					</h:panelGroup>
								
				</h:panelGroup>	
			
			</h:panelGroup>				
				
		</h:panelGroup>
				
		</h:form>
				
	</ui:define>

</ui:composition>